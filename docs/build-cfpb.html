<!DOCTYPE html>  <html> <head>   <title>build-cfpb.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               build-cfpb.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * grunt-cfpb-internal</span>
<span class="cm"> * https://github.com/cfpb/grunt-cfpb-internal</span>
<span class="cm"> *</span>
<span class="cm"> * A public domain work of the Consumer Financial Protection Bureau.</span>
<span class="cm"> *</span>
<span class="cm"> * Parts (c) 2012 Tyler Kellen, contributors</span>
<span class="cm"> * Licensed under the MIT license.</span>
<span class="cm"> */</span>

<span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">shell</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;shelljs&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">grunt</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Add custom template delimiters.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">addDelimiters</span><span class="p">(</span> <span class="s1">&#39;build-cfpb&#39;</span><span class="p">,</span> <span class="s1">&#39;{%&#39;</span><span class="p">,</span> <span class="s1">&#39;%}&#39;</span> <span class="p">);</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerMultiTask</span><span class="p">(</span> <span class="s1">&#39;build-cfpb&#39;</span><span class="p">,</span> <span class="s1">&#39;Generate CFPB README&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">),</span>
        <span class="nx">asset</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;assets&#39;</span> <span class="p">),</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">({</span>
          <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;./&#39;</span><span class="p">,</span>
          <span class="nx">commit</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="nx">tag</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="nx">push</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">}),</span>
        <span class="nx">dir</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">dir</span><span class="p">,</span>
        <span class="nx">meta</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;package.json&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Read the changelog YAML file.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;CHANGELOG&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span> <span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;CHANGELOG&#39;</span><span class="p">),</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;CHANGELOG&#39;</span> <span class="p">);</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="s1">&#39;Created CHANGELOG file&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">meta</span><span class="p">.</span><span class="nx">changelog</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readYAML</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;CHANGELOG&#39;</span> <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;Current version: &#39;</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">meta</span><span class="p">.</span><span class="nx">changelog</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Read the contributing markdown file.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;CONTRIBUTING.md&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span> <span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;CONTRIBUTING.md&#39;</span><span class="p">),</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;CONTRIBUTING.md&#39;</span> <span class="p">);</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="s1">&#39;Created CONTRIBUTING.md&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">meta</span><span class="p">.</span><span class="nx">contributing</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;CONTRIBUTING.md&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Read the license file.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;TERMS.md&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span> <span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;TERMS.md&#39;</span><span class="p">),</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;TERMS.md&#39;</span> <span class="p">);</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="s1">&#39;Created TERMS.md file&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">meta</span><span class="p">.</span><span class="nx">license</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;TERMS.md&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Read the copying file.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;COPYING.txt&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span> <span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;COPYING.txt&#39;</span><span class="p">),</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;COPYING.txt&#39;</span> <span class="p">);</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="s1">&#39;Created COPYING.txt file&#39;</span><span class="p">);</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Generate readme.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">tmpl</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span> <span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;README.tmpl.md&#39;</span><span class="p">)</span> <span class="p">),</span>
        <span class="nx">appendix</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span> <span class="nx">tmpl</span><span class="p">,</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="nx">meta</span><span class="p">,</span> <span class="nx">delimiters</span><span class="o">:</span> <span class="s1">&#39;build-cfpb&#39;</span><span class="p">}</span> <span class="p">),</span>
        <span class="nx">readme</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;README.md&#39;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;README.md&#39;</span> <span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Remove contributing section and everything after from readme because we'll be re-adding it.
([\s\n\r]<em>) selects any whitespace before the contributing title.
([\s\S]</em>) selects everything after the contributing title.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">newReadme</span> <span class="o">=</span> <span class="nx">readme</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([\s\n\r]*)## Contributing([\s\S]*)/ig</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

    <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;README.md&#39;</span><span class="p">,</span> <span class="nx">newReadme</span> <span class="o">+</span> <span class="nx">appendix</span> <span class="p">);</span>
    <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="s1">&#39;Created README.md&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Get the most recent version from the changelog.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">version</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span> <span class="nx">meta</span><span class="p">.</span><span class="nx">changelog</span> <span class="p">)[</span><span class="mi">0</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Check if the readme contains the most recent version (there's probably a better way to do this).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">readme</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">version</span> <span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Get a fresh copy of package json and stringify the latest CHANGELOG entry.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">pkg</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;package.json&#39;</span> <span class="p">),</span>
            <span class="nx">msg</span> <span class="o">=</span> <span class="nx">meta</span><span class="p">.</span><span class="nx">changelog</span><span class="p">[</span> <span class="nx">version</span> <span class="p">].</span><span class="nx">changes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span>
            <span class="nx">bower</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Bump the version in package.json.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">pkg</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="nx">version</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="p">);</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;package.json&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span> <span class="nx">pkg</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span> <span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="p">);</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="s1">&#39;Version bumped to &#39;</span> <span class="o">+</span> <span class="nx">version</span> <span class="o">+</span> <span class="s1">&#39; in package.json.&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Bump the version in bower.json.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;bower.json&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">bower</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;bower.json&#39;</span> <span class="p">);</span>
          <span class="nx">bower</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="nx">version</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="p">);</span>
          <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;bower.json&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span> <span class="nx">bower</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span> <span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="p">);</span>
          <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="s1">&#39;Version bumped to &#39;</span> <span class="o">+</span> <span class="nx">version</span> <span class="o">+</span> <span class="s1">&#39; in bower.json.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">commit</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Ensure that meta files get tracked if they were just created.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">shell</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="s1">&#39;git add README.md CHANGELOG CONTRIBUTING.mdÂ COPYING.txt TERMS.md&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Commit the latest changes.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">shell</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="s1">&#39;git commit -am &quot;&#39;</span> <span class="o">+</span> <span class="nx">msg</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="p">);</span>
          <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="s1">&#39;Changes have been committed.&#39;</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">tag</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Create tag.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">shell</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="s1">&#39;git tag &#39;</span> <span class="o">+</span> <span class="nx">version</span> <span class="o">+</span> <span class="s1">&#39; -m &quot;Version &#39;</span> <span class="o">+</span> <span class="nx">version</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">silent</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span> <span class="p">);</span>
          <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="s1">&#39;Git tag has been created.&#39;</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">push</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Push tags.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">shell</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="s1">&#39;git push --tags&#39;</span> <span class="p">);</span>
          <span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="s1">&#39;Git tag has been pushed.&#39;</span> <span class="p">);</span>
        <span class="p">}</span>

    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Fail task if any errors were logged.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">errorCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>

  <span class="p">});</span>

<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 